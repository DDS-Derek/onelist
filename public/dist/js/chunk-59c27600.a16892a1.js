(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59c27600"],{"79a9":function(e,l,t){"use strict";t("ee07")},b426:function(e,l,t){"use strict";t.r(l);var a=t("7a23");const b=e=>(Object(a["L"])("data-v-a03bf2ee"),e=e(),Object(a["J"])(),e),c={key:0,class:"load"},s={key:1,class:"content"},i={class:"content-header"},o=b(()=>Object(a["l"])("div",{class:"content-header-title"}," 媒体库 ",-1)),n={class:"content-header-tool"},r=b(()=>Object(a["l"])("i",{class:"bx bx-analyse"},null,-1)),d=b(()=>Object(a["l"])("i",{class:"bx bx-plus-circle"},null,-1)),O={class:"gallery-list"},u=b(()=>Object(a["l"])("i",{class:"bx bx-detail"},null,-1)),j=["src"],p={key:1,loading:"lazy",class:"gallery-img",src:"/images/not_gellery.png"},g={class:"gallery-tool"},y={class:"gallery-data"},h={class:"gallery-type"},_={class:"gallery-alist"},v={class:"gallery-show"},f=b(()=>Object(a["l"])("i",{class:"bx bx-plus-circle"},null,-1)),m=b(()=>Object(a["l"])("i",{class:"bx bx-x"},null,-1)),w=b(()=>Object(a["l"])("i",{class:"bx bx-save"},null,-1)),x=b(()=>Object(a["l"])("i",{class:"bx bx-x"},null,-1)),z=b(()=>Object(a["l"])("i",{class:"bx bx-trash"},null,-1)),k=b(()=>Object(a["l"])("i",{class:"bx bx-save"},null,-1));function M(e,l,t,b,M,U){const C=Object(a["R"])("n-button"),R=Object(a["R"])("n-space"),A=Object(a["R"])("n-card"),I=Object(a["R"])("n-gi"),Y=Object(a["R"])("n-grid"),q=Object(a["R"])("n-input"),N=Object(a["R"])("n-form-item"),F=Object(a["R"])("n-select"),S=Object(a["R"])("n-switch"),$=Object(a["R"])("n-form"),G=Object(a["R"])("n-modal");return b.loading?(Object(a["I"])(),Object(a["k"])("div",c)):(Object(a["I"])(),Object(a["k"])("div",s,[Object(a["l"])("div",i,[o,Object(a["l"])("div",n,[Object(a["n"])(R,{justify:"end",size:"medium"},{default:Object(a["bb"])(()=>[Object(a["n"])(C,{onClick:l[0]||(l[0]=e=>b.reF()),type:"info"},{icon:Object(a["bb"])(()=>[r]),default:Object(a["bb"])(()=>[Object(a["m"])(" 刷新 ")]),_:1}),Object(a["n"])(C,{onClick:l[1]||(l[1]=e=>U.CreateShow()),type:"info"},{icon:Object(a["bb"])(()=>[d]),default:Object(a["bb"])(()=>[Object(a["m"])(" 新增 ")]),_:1})]),_:1})])]),Object(a["l"])("div",O,[Object(a["n"])(Y,{"x-gap":"12","y-gap":"12",cols:"1 s:2 m:2 l:4 xl:4 2xl:8",responsive:"screen"},{default:Object(a["bb"])(()=>[(Object(a["I"])(!0),Object(a["k"])(a["b"],null,Object(a["P"])(b.data,(l,t)=>(Object(a["I"])(),Object(a["i"])(I,{key:t},{default:Object(a["bb"])(()=>[Object(a["n"])(A,{title:l.title},{"header-extra":Object(a["bb"])(()=>[Object(a["n"])(C,{onClick:e=>U.EditGallery(l),strong:"",secondary:"",circle:""},{default:Object(a["bb"])(()=>[u]),_:2},1032,["onClick"])]),footer:Object(a["bb"])(()=>[Object(a["l"])("div",g,[Object(a["l"])("div",y,[Object(a["n"])(R,{justify:"start",size:"medium",vertical:""},{default:Object(a["bb"])(()=>[Object(a["l"])("div",h," 类别："+Object(a["T"])(l.gallery_type),1),Object(a["l"])("div",_," alist："+Object(a["T"])(l.is_alist?"是":"否"),1)]),_:2},1024)]),Object(a["l"])("div",v,[Object(a["n"])(C,{onClick:e=>U.addPath(l),type:"info"},{icon:Object(a["bb"])(()=>[f]),default:Object(a["bb"])(()=>[Object(a["m"])(" 挂载目录 ")]),_:2},1032,["onClick"])])])]),default:Object(a["bb"])(()=>[l.image.length>0?(Object(a["I"])(),Object(a["k"])("img",{key:0,loading:"lazy",class:"gallery-img",src:e.COMMON.imgUrl+"/t/p/w355_and_h200_multi_faces/"+l.image},null,8,j)):(Object(a["I"])(),Object(a["k"])("img",p))]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),Object(a["n"])(G,{class:"create",show:b.showModal,"onUpdate:show":l[11]||(l[11]=e=>b.showModal=e),"transform-origin":"center"},{default:Object(a["bb"])(()=>[Object(a["n"])(A,{style:{width:"600px"},title:"创建",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{"header-extra":Object(a["bb"])(()=>[Object(a["n"])(C,{onClick:l[2]||(l[2]=e=>b.showModal=!b.showModal),strong:"",secondary:"",circle:""},{default:Object(a["bb"])(()=>[m]),_:1})]),footer:Object(a["bb"])(()=>[Object(a["n"])(R,{justify:"end",size:"medium"},{default:Object(a["bb"])(()=>[Object(a["n"])(C,{onClick:l[10]||(l[10]=e=>U.Create()),type:"info"},{icon:Object(a["bb"])(()=>[w]),default:Object(a["bb"])(()=>[Object(a["m"])(" 创建 ")]),_:1})]),_:1})]),default:Object(a["bb"])(()=>[Object(a["n"])($,{model:b.gallery},{default:Object(a["bb"])(()=>[Object(a["n"])(N,{label:"媒体库标题"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",value:b.gallery.title,"onUpdate:value":l[3]||(l[3]=e=>b.gallery.title=e),placeholder:"",clearable:""},null,8,["value"])]),_:1}),Object(a["n"])(N,{label:"封面图片"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",value:b.gallery.image,"onUpdate:value":l[4]||(l[4]=e=>b.gallery.image=e),placeholder:"",clearable:""},null,8,["value"])]),_:1}),Object(a["n"])(N,{label:"类型",path:""},{default:Object(a["bb"])(()=>[Object(a["n"])(F,{size:"large",value:b.gallery.gallery_type,"onUpdate:value":l[5]||(l[5]=e=>b.gallery.gallery_type=e),placeholder:"Select",options:b.typeOptions},null,8,["value","options"])]),_:1}),Object(a["n"])(N,{label:"是否为alist,如果是则需要输入相关信息，用于刮削文件?"},{default:Object(a["bb"])(()=>[Object(a["n"])(S,{size:"large",value:b.gallery.is_alist,"onUpdate:value":l[6]||(l[6]=e=>b.gallery.is_alist=e),placeholder:"",clearable:""},null,8,["value"])]),_:1}),Object(a["cb"])(Object(a["n"])(N,{label:"域名"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",value:b.gallery.alist_host,"onUpdate:value":l[7]||(l[7]=e=>b.gallery.alist_host=e),placeholder:"",clearable:""},null,8,["value"])]),_:1},512),[[a["Y"],b.gallery.is_alist]]),Object(a["cb"])(Object(a["n"])(N,{label:"账号"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",value:b.gallery.alist_user,"onUpdate:value":l[8]||(l[8]=e=>b.gallery.alist_user=e),placeholder:"",clearable:""},null,8,["value"])]),_:1},512),[[a["Y"],b.gallery.is_alist]]),Object(a["cb"])(Object(a["n"])(N,{label:"密码"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{type:"password","show-password-on":"mousedown",size:"large",value:b.gallery.alist_pwd,"onUpdate:value":l[9]||(l[9]=e=>b.gallery.alist_pwd=e),placeholder:"",clearable:""},null,8,["value"])]),_:1},512),[[a["Y"],b.gallery.is_alist]])]),_:1},8,["model"])]),_:1})]),_:1},8,["show"]),Object(a["n"])(G,{class:"update",show:b.updateModal,"onUpdate:show":l[22]||(l[22]=e=>b.updateModal=e),"transform-origin":"center"},{default:Object(a["bb"])(()=>[Object(a["n"])(A,{style:{width:"600px"},title:"更新",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{"header-extra":Object(a["bb"])(()=>[Object(a["n"])(C,{onClick:l[12]||(l[12]=e=>b.updateModal=!b.updateModal),strong:"",secondary:"",circle:""},{default:Object(a["bb"])(()=>[x]),_:1})]),footer:Object(a["bb"])(()=>[Object(a["n"])(R,{justify:"end",size:"medium"},{default:Object(a["bb"])(()=>[Object(a["n"])(C,{onClick:l[20]||(l[20]=e=>U.Delete()),type:"warning"},{icon:Object(a["bb"])(()=>[z]),default:Object(a["bb"])(()=>[Object(a["m"])(" 删除 ")]),_:1}),Object(a["n"])(C,{onClick:l[21]||(l[21]=e=>U.Update()),type:"info"},{icon:Object(a["bb"])(()=>[k]),default:Object(a["bb"])(()=>[Object(a["m"])(" 更新 ")]),_:1})]),_:1})]),default:Object(a["bb"])(()=>[Object(a["n"])($,{model:b.gallery},{default:Object(a["bb"])(()=>[Object(a["n"])(N,{label:"媒体库标题"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",value:b.gallery.title,"onUpdate:value":l[13]||(l[13]=e=>b.gallery.title=e),placeholder:"",clearable:""},null,8,["value"])]),_:1}),Object(a["n"])(N,{label:"封面图片"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",value:b.gallery.image,"onUpdate:value":l[14]||(l[14]=e=>b.gallery.image=e),placeholder:"",clearable:""},null,8,["value"])]),_:1}),Object(a["n"])(N,{label:"类型",path:""},{default:Object(a["bb"])(()=>[Object(a["n"])(F,{size:"large",value:b.gallery.gallery_type,"onUpdate:value":l[15]||(l[15]=e=>b.gallery.gallery_type=e),placeholder:"Select",options:b.typeOptions},null,8,["value","options"])]),_:1}),Object(a["n"])(N,{label:"是否为alist,如果是则需要输入以下相关信息，用于刮削文件?"},{default:Object(a["bb"])(()=>[Object(a["n"])(S,{size:"large",value:b.gallery.is_alist,"onUpdate:value":l[16]||(l[16]=e=>b.gallery.is_alist=e),placeholder:"",clearable:""},null,8,["value"])]),_:1}),Object(a["cb"])(Object(a["n"])(N,{label:"域名"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",value:b.gallery.alist_host,"onUpdate:value":l[17]||(l[17]=e=>b.gallery.alist_host=e),placeholder:"",clearable:""},null,8,["value"])]),_:1},512),[[a["Y"],b.gallery.is_alist]]),Object(a["cb"])(Object(a["n"])(N,{label:"账号"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",value:b.gallery.alist_user,"onUpdate:value":l[18]||(l[18]=e=>b.gallery.alist_user=e),placeholder:"",clearable:""},null,8,["value"])]),_:1},512),[[a["Y"],b.gallery.is_alist]]),Object(a["cb"])(Object(a["n"])(N,{label:"密码"},{default:Object(a["bb"])(()=>[Object(a["n"])(q,{size:"large",type:"password","show-password-on":"mousedown",value:b.gallery.alist_pwd,"onUpdate:value":l[19]||(l[19]=e=>b.gallery.alist_pwd=e),placeholder:"",clearable:""},null,8,["value"])]),_:1},512),[[a["Y"],b.gallery.is_alist]])]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])]))}t("14d9");var U=t("0d1c"),C=t.n(U),R={name:"GalleryIndex",setup(){const e=Object(a["O"])(!0),l=Object(a["O"])(!1),t=Object(a["O"])(!1),b=Object(a["O"])(null),c=Object(a["O"])(null),{proxy:s}=Object(a["p"])(),i=Object(a["O"])(1),o=Object(a["O"])(24),n=Object(a["O"])("创建"),r=Object(a["O"])({id:null,title:"",gallery_type:"",is_tv:!0,gallery_uid:"",image:"",is_alist:!0,alist_host:"",alist_user:"",alist_pwd:""});function d(){s.axios.post(s.COMMON.apiUrl+"/v1/api/gallery/list?page="+i.value+"&size="+o.value,{},{headers:{"content-type":"application/json",Authorization:s.$cookies.get("Authorization")}}).then(l=>{200==l.data.code?(c.value=l.data.data,e.value=!1):C.a.show({pos:"top-center",text:l.data.msg,showAction:!1})}).catch(e=>{C.a.show({pos:"top-center",text:e,showAction:!1})})}const O=async()=>{d()};return Object(a["F"])(()=>{d()}),{data:c,error:b,loading:e,showModal:l,page:i,gallery:r,modal_title:n,size:o,updateModal:t,reF:O,typeOptions:["movie","tv"].map(e=>({label:e,value:e}))}},methods:{CreateShow(){this.gallery={title:"",gallery_type:"",is_tv:!1,gallery_uid:"",image:"",is_alist:!0,alist_host:"",alist_user:"",alist_pwd:""},this.showModal=!this.showModal},EditGallery(e){this.gallery=e,this.updateModal=!this.updateModal},Request(e,l){this.axios.post(e,l,{headers:{"content-type":"application/json",Authorization:this.$cookies.get("Authorization")}}).then(e=>{200==e.data.code?(this.$emit("refApp"),C.a.show({pos:"top-center",text:e.data.msg,showAction:!1}),this.reF()):C.a.show({pos:"top-center",text:e.data.msg,showAction:!1})}).catch(e=>{C.a.show({pos:"top-center",text:e,showAction:!1})})},Create(){"tv"==this.gallery.gallery_type&&(this.gallery.is_tv=!0),this.Request(this.COMMON.apiUrl+"/v1/api/gallery/create",this.gallery)},Update(){this.Request(this.COMMON.apiUrl+"/v1/api/gallery/update?id="+this.gallery.id,this.gallery)},Delete(){this.Request(this.COMMON.apiUrl+"/v1/api/gallery/delete?id="+this.gallery.id,{})},addPath(e){this.$router.push({path:"/gallerys/works",query:{gallery_uid:e.gallery_uid}})}}},A=(t("79a9"),t("6b0d")),I=t.n(A);const Y=I()(R,[["render",M],["__scopeId","data-v-a03bf2ee"]]);l["default"]=Y},ee07:function(e,l,t){}}]);
//# sourceMappingURL=chunk-59c27600.a16892a1.js.map